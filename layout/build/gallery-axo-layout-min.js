YUI.add("gallery-axo-layout",function(h){var c=h.Event,f=h.Lang,b={vertical:{_nextHandle:"b",_prevHandle:"t",_dimension:"height",_Dimension:"Height",_oppositeDimension:"width",_OppositeDimension:"Width",_offset:"top",_oppositeOffset:"left"},horizontal:{_nextHandle:"r",_prevHandle:"l",_dimension:"width",_Dimension:"Width",_oppositeDimension:"height",_OppositeDimension:"Height",_offset:"left",_oppositeOffset:"top"}},g={height:"Height",width:"Width"},e={height:"Top",width:"Left"},d={height:"Bottom",width:"Right"};h.LayoutChild=h.Base.create("layoutChild",h.Widget,[h.WidgetChild],{bindUI:function(){this.after("resizeChange",this._afterResizeOrParentChange);this.after("parentChange",this._afterResizeOrParentChange);this._afterResizeOrParentChange();this.after("heightChange",this._afterSizeChange);this.after("widthChange",this._afterSizeChange);},_setAttrUI:function(i){if(i.target===this){h.LayoutChild.superclass._setAttrUI.apply(this,arguments);}},destructor:function(){this._destroyResize();},_afterResizeOrParentChange:function(){var j=this.get("resize");var k=this.get("parent");this._destroyResize();if(j&&k){var l=(k._items[k._items.length-1]===this)?k._prevHandle:k._nextHandle,m=k._dimension;var i={node:this._getResizableWidget().get("boundingBox"),height:this.get("height"),width:this.get("width"),handles:l,wrap:false};h.mix(i,j);this._resize=new h.Resize(i);if(i.proxy&&h.ResizeProxy){this._resize.plug(h.ResizeProxy);}this._resize.on("start",function(){this.fire("startResize");},this);this._resize.on("resize",function(n){this._getResizableWidget().set(m,n.info["offset"+g[m]]);},this);this._resize.on("end",function(){this.fire("endResize");},this);}},_getResizableWidget:function(){return this;},setBatchUpdate:function(i){this._batchUpdate=Boolean(i);},_afterSizeChange:function(j){if(j.target===this){if(!this._batchUpdate){var i=this.get("parent");if(i){i.sizeAndPlaceChildren();}else{if(this.sizeAndPlaceChildren){this.sizeAndPlaceChildren();}}}}},_destroyResize:function(){if(this._resize){this._resize.destroy();delete this._resize;}}},{ATTRS:{fluid:{value:false,validator:function(i){return f.isBoolean(i)||f.isNumber(i);}},resize:{value:false,validator:function(){return Boolean(h.Resize);},lazyAdd:false}}});h.Layout=h.Base.create("layout",h.LayoutChild,[h.WidgetParent],{renderUI:function(){this.get("boundingBox").addClass(this.getClassName(this.get("orientation")));},bindUI:function(){h.Layout.superclass.bindUI.apply(this);if(this.get("sizeToWindow")){this._windowResizeHandle=h.after("resize",this._sizeAndPlace,window,this);}},syncUI:function(){if(this.isRoot()){this._sizeAndPlace();}},destructor:function(){this._windowResizeHandle.detach();},setBatchUpdate:function(i){if(Boolean(i)!==this._batchUpdate){h.Layout.superclass.setBatchUpdate.apply(this,arguments);h.each(this._items,function(j){j.setBatchUpdate(i);});}},_sizeAndPlace:function(){this._sizeToWindow();this.sizeAndPlaceChildren();},_sizeToWindow:function(){if(this.get("sizeToWindow")){var i=this.get("boundingBox");this.set("height",i.get("winHeight"));this.set("width",i.get("winWidth"));}},sizeAndPlaceChildren:function(){var k=this._items,m=this._dimension,q=this._oppositeDimension,l=this._offset,s=this._oppositeOffset;this.setBatchUpdate(true);var t=this._getInnerContentDimension(m),u=this._getInnerContentDimension(q);var v=[];var p=0;var n=0;h.Array.each(k,function(y,o){v[o]=parseInt(y.get(m),10);var w=y.get("fluid");if(w){var x=Number(w);n+=x;v[o]=x;}else{p+=v[o];}});var r=(t-p)/n;var j=this._getBoundaryDimension(m);var i=this._getBoundaryDimension(q);h.Array.each(k,function(x,o){var w=x.get("fluid");if(w){v[o]=r*v[o];x.set(m,v[o]+"px");}x.set(q,u+"px");x.get("boundingBox").setStyle(l,j);x.get("boundingBox").setStyle(s,i);j+=v[o];if(x.sizeAndPlaceChildren){x.sizeAndPlaceChildren();}});this.setBatchUpdate(false);},_getInnerContentDimension:function(j){var i=this.get("contentBox");return i.get("client"+g[j])-this._getBothSidesOf(i,"margin",j)-this._getBothSidesOf(i,"padding",j);},_getBoundaryDimension:function(j){var i=this.get("contentBox");return this._getFirstSideOf(i,"margin",j)+this._getFirstSideOf(i,"border",j)+this._getFirstSideOf(i,"padding",j);},_getBothSidesOf:function(i,j,k){return this._valueOf(i.getComputedStyle(j+e[k]))+this._valueOf(i.getComputedStyle(j+d[k]));},_getFirstSideOf:function(i,j,l){var k=j=="border"?"Width":"";return this._valueOf(i.getComputedStyle(j+e[l]+k));},_valueOf:function(i){return i?parseInt(i,10):0;}},{ATTRS:{orientation:{value:"horizontal",validator:function(i){return i==="horizontal"||i==="vertical";},setter:function(i){h.mix(this,b[i]);},lazyAdd:false,writeOnce:"initOnly"},sizeToWindow:{value:false,validator:f.isBoolean,writeOnce:"initOnly"}}});var a=function(i){this.after("addChild",this._afterAddChild);this.after("removeChild",this._afterRemoveChild);this.after("heightChange",this._applySizeToChildren);this.after("widthChange",this._applySizeToChildren);};a.ATTRS={tieSize:{value:{}},shownChildIndex:{setter:function(i){h.each(this._items,function(l,j){var k=i===j;l.set("visible",k);if(k){this._applySizeFromChild(l);if(!this.get("tieSize").height){l.after("heightChange",this._afterChildSizeChange,this);}if(!this.get("tieSize").width){l.after("widthChange",this._afterChildSizeChange,this);}}else{l.detach("heightChange",this._afterChildSizeChange,this);l.detach("widthChange",this._afterChildSizeChange,this);}},this);}}};a.prototype={CONTENT_TEMPLATE:null,showChild:function(i){this.set("shownChildIndex",i);},_afterAddChild:function(i){var j=i.child;j.set("visible",false);if(!f.isNumber(this.get("shownChildIndex"))){this.set("shownChildIndex",0);}this._applySizeToChild(j);},_afterRemoveChild:function(i){var j=i.child;j.detach("heightChange",this._afterChildSizeChange,this);j.detach("widthChange",this._afterChildSizeChange,this);},_afterChildSizeChange:function(i){this._applySizeFromChild(i.target);},_applySizeFromChild:function(k){if(!this.get("tieSize").height){var i=k.get("height");this.set("height",i);
}if(!this.get("tieSize").width){var j=k.get("width");this.set("width",j);}},_applySizeToChild:function(l){var k=this.get("tieSize");if(k.height){var i=this.get("height");l.set("height",i);}if(k.width){var j=this.get("width");l.set("width",j);}},_applySizeToChildren:function(){h.each(this._items,function(i){this._applySizeToChild(i);},this);}};h.WidgetMorph=a;h.LayoutChildCollapsableClip=h.Base.create("layoutChildCollapsableClip",h.Widget,[h.WidgetChild],{},{});h.LayoutChildCollapsableContent=h.Base.create("layoutChildCollapsableContent",h.Widget,[h.WidgetChild],{},{});h.LayoutChildCollapsable=h.Base.create("layoutChildCollapsable",h.LayoutChild,[h.WidgetParent,h.WidgetMorph],{initializer:function(i){this.after("parentChange",this._tieSize);this._tieSize();},_tieSize:function(){var i=this.get("parent");if(i){var k=new h.LayoutChildCollapsableContent(),j=new h.LayoutChildCollapsableClip(),m=i._dimension;k.set(m,this.get(m));j.set(m,50);this.add(k);this.add(j);var l={};l[i._oppositeDimension]=true;this.set("tieSize",l);this._applySizeToChildren();}},_getResizableWidget:function(){return this.item(0);},toggle:function(){this.set("collapsed",!this.get("collapsed"));}},{ATTRS:{collapsed:{setter:function(i){this.set("shownChildIndex",Number(i));},getter:function(){return Boolean(this.get("shownChildIndex"));}}}});},"@VERSION@",{requires:["widget-parent","widget-child"],optional:["resize"]});