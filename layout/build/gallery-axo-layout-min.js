YUI.add("gallery-axo-layout",function(d){var n=d.Event,l=d.Lang,j={vertical:{_nextHandle:"b",_prevHandle:"t",_dimension:"height",_Dimension:"Height",_oppositeDimension:"width",_OppositeDimension:"Width",_offset:"top",_oppositeOffset:"left"},horizontal:{_nextHandle:"r",_prevHandle:"l",_dimension:"width",_Dimension:"Width",_oppositeDimension:"height",_OppositeDimension:"Height",_offset:"left",_oppositeOffset:"top"}},k={height:"Height",width:"Width"},c={height:"Top",width:"Left"},b={height:"Bottom",width:"Right"};d.LayoutChild=d.Base.create("layoutChild",d.Widget,[d.WidgetChild],{bindUI:function(){this.after("resizeChange",this._afterResizeOrParentChange);this.after("parentChange",this._afterResizeOrParentChange);this._afterResizeOrParentChange();this.after("heightChange",this._afterSizeChange);this.after("widthChange",this._afterSizeChange);},_setAttrUI:function(p){if(p.target===this){d.LayoutChild.superclass._setAttrUI.apply(this,arguments);}},destructor:function(){this._destroyResize();},_afterResizeOrParentChange:function(){var q=this.get("resize");var r=this.get("parent");this._destroyResize();if(q&&r){var s=(r._items[r._items.length-1]===this)?r._prevHandle:r._nextHandle,t=r._dimension;var p={node:this._getContentWidget().get("boundingBox"),height:this.get("height"),width:this.get("width"),handles:s,wrap:false};d.mix(p,q);this._resize=new d.Resize(p);if(p.proxy&&d.ResizeProxy){this._resize.plug(d.ResizeProxy);}this._resize.on("start",function(){this.fire("startResize");},this);this._resize.on("resize",function(u){this._getContentWidget().set(t,u.info["offset"+k[t]]);},this);this._resize.on("end",function(){this.fire("endResize");},this);}},_getContentWidget:function(){return this;},setBatchUpdate:function(p){this._batchUpdate=Boolean(p);},_afterSizeChange:function(q){if(q.target===this){if(!this._batchUpdate){var p=this.get("parent");if(p){p.sizeAndPlaceChildren();}else{if(this.sizeAndPlaceChildren){this.sizeAndPlaceChildren();}}}}},_destroyResize:function(){if(this._resize){this._resize.destroy();delete this._resize;}}},{ATTRS:{fluid:{value:false,validator:function(p){return l.isBoolean(p)||l.isNumber(p);}},resize:{value:false,validator:function(){return Boolean(d.Resize);},lazyAdd:false}}});d.Layout=d.Base.create("layout",d.LayoutChild,[d.WidgetParent],{renderUI:function(){this.get("boundingBox").addClass(this.getClassName(this.get("orientation")));},bindUI:function(){d.Layout.superclass.bindUI.apply(this);if(this.get("sizeToWindow")){this._windowResizeHandle=d.after("resize",this._sizeAndPlace,window,this);}},syncUI:function(){if(this.isRoot()){this._sizeAndPlace();}},destructor:function(){this._windowResizeHandle.detach();},setBatchUpdate:function(p){if(Boolean(p)!==this._batchUpdate){d.Layout.superclass.setBatchUpdate.apply(this,arguments);d.each(this._items,function(q){q.setBatchUpdate(p);});}},_sizeAndPlace:function(){this._sizeToWindow();this.sizeAndPlaceChildren();},_sizeToWindow:function(){if(this.get("sizeToWindow")){var t=this.get("boundingBox");var p=t.get("winHeight");var r=t.get("winWidth");var s=this.get("sizeToWindow");if(d.Lang.isFunction(s)){var q=s(r,p);r=q[0];p=q[1];}this.set("height",p);this.set("width",r);}},sizeAndPlaceChildren:function(){var r=this._items,t=this._dimension,w=this._oppositeDimension,s=this._offset,y=this._oppositeOffset;this.setBatchUpdate(true);var z=this._getInnerContentDimension(t),A=this._getInnerContentDimension(w);var B=[];var v=0;var u=0;d.Array.each(r,function(F,C){B[C]=parseInt(F.get(t),10);var D=F.get("fluid");if(D){var E=Number(D);u+=E;B[C]=E;}else{v+=B[C];}});var x=(z-v)/u;var q=this._getBoundaryDimension(t);var p=this._getBoundaryDimension(w);d.Array.each(r,function(E,C){var D=E.get("fluid");if(D){B[C]=x*B[C];E.set(t,B[C]+"px");}E.set(w,A+"px");E.get("boundingBox").setStyle(s,q);E.get("boundingBox").setStyle(y,p);q+=B[C];if(E.sizeAndPlaceChildren){E.sizeAndPlaceChildren();}});this.setBatchUpdate(false);},_getInnerContentDimension:function(q){var p=this.get("contentBox");return p.get("client"+k[q])-this._getBothSidesOf(p,"margin",q)-this._getBothSidesOf(p,"padding",q);},_getBoundaryDimension:function(q){var p=this.get("contentBox");return this._getFirstSideOf(p,"margin",q)+this._getFirstSideOf(p,"border",q)+this._getFirstSideOf(p,"padding",q);},_getBothSidesOf:function(p,q,r){return this._valueOf(p.getComputedStyle(q+c[r]))+this._valueOf(p.getComputedStyle(q+b[r]));},_getFirstSideOf:function(p,q,s){var r=q=="border"?"Width":"";return this._valueOf(p.getComputedStyle(q+c[s]+r));},_valueOf:function(p){return p?parseInt(p,10):0;}},{ATTRS:{orientation:{value:"horizontal",validator:function(p){return p==="horizontal"||p==="vertical";},setter:function(p){d.mix(this,j[p]);},lazyAdd:false,writeOnce:"initOnly"},sizeToWindow:{value:false,validator:function(p){return l.isBoolean(p)||l.isFunction(p);},writeOnce:"initOnly"}}});var f=function(p){this.after("addChild",this._afterAddChild);this.after("removeChild",this._afterRemoveChild);this.after("heightChange",this._applySizeToChildren);this.after("widthChange",this._applySizeToChildren);};f.ATTRS={tieSize:{value:{}},shownChildIndex:{setter:function(p){d.each(this._items,function(s,q){var r=p===q;s.set("visible",r);if(r){this._applySizeFromChild(s);if(!this.get("tieSize").height){s.after("heightChange",this._afterChildSizeChange,this);}if(!this.get("tieSize").width){s.after("widthChange",this._afterChildSizeChange,this);}}else{s.detach("heightChange",this._afterChildSizeChange,this);s.detach("widthChange",this._afterChildSizeChange,this);}},this);}}};f.prototype={CONTENT_TEMPLATE:null,showChild:function(p){this.set("shownChildIndex",p);},_afterAddChild:function(p){var q=p.child;q.set("visible",false);if(!l.isNumber(this.get("shownChildIndex"))){this.set("shownChildIndex",0);}this._applySizeToChild(q);},_afterRemoveChild:function(p){var q=p.child;q.detach("heightChange",this._afterChildSizeChange,this);q.detach("widthChange",this._afterChildSizeChange,this);},_afterChildSizeChange:function(p){this._applySizeFromChild(p.target);
},_applySizeFromChild:function(r){if(!this.get("tieSize").height){var p=r.get("height");this.set("height",p);}if(!this.get("tieSize").width){var q=r.get("width");this.set("width",q);}},_applySizeToChild:function(s){var r=this.get("tieSize");if(r.height){var p=this.get("height");s.set("height",p);}if(r.width){var q=this.get("width");s.set("width",q);}},_applySizeToChildren:function(){d.each(this._items,function(p){this._applySizeToChild(p);},this);}};d.WidgetMorph=f;d.LayoutChildCollapsableClip=d.Base.create("layoutChildCollapsableClip",d.Widget,[d.WidgetChild],{},{});d.LayoutChildCollapsableContent=d.Base.create("layoutChildCollapsableContent",d.Widget,[d.WidgetChild],{},{});d.LayoutChildCollapsable=d.Base.create("layoutChildCollapsable",d.LayoutChild,[d.WidgetParent,d.WidgetMorph],{initializer:function(p){this.after("parentChange",this._tieSize);this._tieSize();},_tieSize:function(){var p=this.get("parent");if(p){var r=this._makeContentWidget(),q=this._makeClipWidget(),t=p._dimension;r.set(t,this.get(t));q.set(t,this.get("collapsedSize"));this.add(r);this.add(q);var s={};s[p._oppositeDimension]=true;this.set("tieSize",s);this._applySizeToChildren();}},_getContentWidget:function(){return this.item(0);},_getClipWidget:function(){return this.item(1);},_makeContentWidget:function(){return new d.LayoutChildCollapsableContent();},_makeClipWidget:function(){return new d.LayoutChildCollapsableClip();},toggle:function(){this.set("collapsed",!this.get("collapsed"));}},{ATTRS:{collapsed:{setter:function(p){this.set("shownChildIndex",Number(p));},getter:function(){return Boolean(this.get("shownChildIndex"));}},collapsedSize:{value:50}}});var e=d.ClassNameManager.getClassName,g="layoutChild",a={buttons:e(g,"buttons"),collapseButton:e(g,"button","collapse"),expandButton:e(g,"button","expand")},o='<div class="{cssClass}"></div>',i=d.substitute(o,{"cssClass":a.buttons}),m="{label}"+i;var h=function(){var p=d.substitute(d.LayoutChildStd.CONTENT_HEADER_TEMPLATE,{label:this.get("label")});this._getContentWidget().setStdModContent(d.WidgetStdMod.HEADER,p);};d.LayoutChildStd=d.Base.create(g,d.LayoutChild,[d.WidgetStdMod],{syncUI:function(){d.LayoutChildStd.superclass.syncUI.apply(this,arguments);h.apply(this,arguments);}},{ATTRS:{label:{}},BUTTONS_TEMPLATE:i,CONTENT_HEADER_TEMPLATE:m});d.LayoutChildCollapsableContentStd=d.Base.create("layoutChildCollapsableContent",d.LayoutChildCollapsableContent,[d.WidgetStdMod],{},{});d.LayoutChildCollapsableClipStd=d.Base.create("layoutChildCollapsableClip",d.LayoutChildCollapsableClip,[d.WidgetStdMod],{},{});d.LayoutChildCollapsableStd=d.Base.create(g,d.LayoutChildCollapsable,[d.WidgetStdMod],{syncUI:function(){d.LayoutChildCollapsableStd.superclass.syncUI.apply(this,arguments);h.apply(this,arguments);this._addButton(this._getContentWidget(),d.LayoutChildCollapsableStd.COLLAPSE_ICON_TEMPLATE);var q=d.substitute(d.LayoutChildCollapsableStd.CLIP_HEADER_TEMPLATE,{label:this.get("label")});var p=this._getClipWidget();p.setStdModContent(d.WidgetStdMod.HEADER,q);this._addButton(p,d.LayoutChildCollapsableStd.EXPAND_ICON_TEMPLATE);},_makeContentWidget:function(){return new d.LayoutChildCollapsableContentStd();},_makeClipWidget:function(){return new d.LayoutChildCollapsableClipStd();},_addButton:function(r,s){var q=r.get("boundingBox").one("."+a.buttons);var p=d.Node.create(s);p.on("click",this.toggle,this);q.append(p);}},{ATTRS:{label:{}},CLIP_HEADER_TEMPLATE:d.substitute(o,{cssClass:a.buttons}),COLLAPSE_ICON_TEMPLATE:d.substitute(o,{cssClass:a.collapseButton}),EXPAND_ICON_TEMPLATE:d.substitute(o,{cssClass:a.expandButton})});},"@VERSION@",{requires:["widget-parent","widget-child","widget-stdmod","substitute"],optional:["resize"]});